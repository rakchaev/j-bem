# j-bem
Client JS framework prototype for BEM projects

## Описание
Прототип клиентского JS-фреймворка для БЭМ-проектов.

Целью прототипа является продумывание и пересмотр механизмов клиентской логики для БЭМ-проектов с большим количеством клиентской логики и SPA.
И возможное дальнейшее внедрение идей в `i-bem` или построение на основе прототипа нового фреймворка.

Основные идеи:
* Абстракция над DOM — вместо низкоуровнего взаимодействия с DOM разработчик оперирует только БЭМ-терминами, а работу с DOM фреймворк берет на себя.
* Хранение единого текущего представления всего приложения (БЭМ-дерева).
* Доступ из инстанса БЭМ-блока к куску соответствущего БЭМ-дерева (выше по дереву доступа нет).
* Фреймворк — библиотека, а не блок (нет необходимости в отдельном классе `i-bem`).

Рабочие названия:
* `j-bem` (развитие идей текущего `i-bem`)
* `JetBem`

Черновой пример использования:
```javascript
JBem.init({
    // Принимает метод любого шаблонизатора, который умеет bemjson -> virtual-dom.
    // Например, учим BEMHTML.apply принимать первым аргументом output = 'html' или 'virtual-dom', по умолчанию 'html'.
    // В этом случае будем передавать
    // const applyTemplates = R.curry(BEMHTML.apply)('virtual-dom');
    applyTemplates: applyTemplates,
    // Принимает начальное БЭМ-дерево страницы.
    // Если была серверная шаблонизация и нужно связать bemjson с html, прокидываем bemjson с сервера. Можно как-то получить и напрямую передать в JBem.init либо научить JBem забирать самому из DOM, например, script[@type='text/bemjson'].
    bemjson: {}
});

JBem.decl('my-block', {
    onSetMod: {
        js: {
            inited: function() {
                this.domElem // По-прежнему хранит ссылку на DOM-узел.
                this.bemjson // Хранит ссылку на блок в БЭМ-дереве приложения, соответствующий инстансу.

                this.findBlockInside('input').on('change', (e) => {
                    const text = e.target.getVal();
                    // При изменении БЭМ-дерева происходит перерисовка изменившихся частей DOM'а.
                    // Например:

                    // Добавляем тайтл при каждом измении инпута
                    this.bemjson.content.push({block: 'title', content: text});
                    // Меняем поле контекста блока
                    this.bemjson.text = text;
                });
            }
        }
    }
});
```
